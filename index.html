<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ä½“éªŒè°ƒç ”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2d3748;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            color: #718096;
            font-size: 14px;
        }

        .category {
            margin-bottom: 24px;
        }

        .category-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }

        .category-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            opacity: 0.7;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            color: #4a5568;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .tag:hover {
            border-color: #667eea;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);
        }

        .tag.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* ä¸­æ€§æ ‡ç­¾é€‰ä¸­çŠ¶æ€ */
        .tag.neutral.selected {
            background: linear-gradient(135deg, #718096, #4a5568);
            border-color: #718096;
            color: white;
        }

        /* è´Ÿé¢æ ‡ç­¾é€‰ä¸­çŠ¶æ€ */
        .tag.negative.selected {
            background: linear-gradient(135deg, #f56565, #c53030);
            border-color: #f56565;
            color: white;
        }

        .review-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8fafc;
            border-radius: 16px;
            border: 2px dashed #cbd5e0;
        }

        .review-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            text-align: center;
        }

        .review-content {
            min-height: 80px;
            padding: 12px;
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            font-size: 14px;
            color: #4a5568;
            line-height: 1.6;
        }

        .review-content:empty:before {
            content: "é€‰æ‹©ä¸Šæ–¹æ ‡ç­¾ï¼Œè¯„ä»·å†…å®¹å°†åœ¨æ­¤æ˜¾ç¤º...";
            color: #a0aec0;
            font-style: italic;
        }

        .buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
        }

        .btn-success {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(72, 187, 120, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .loading {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-page {
            display: none;
        }

        .result-content {
            background: white;
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .result-text {
            font-size: 15px;
            line-height: 1.8;
            color: #2d3748;
            margin-bottom: 0;
        }

        @media (max-width: 480px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            
            .tag {
                font-size: 12px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="main-page">
            <div class="header">
                <h1>ğŸ½ï¸ç”¨æˆ·ä½“éªŒè°ƒç ”ğŸ½ï¸</h1>
                <p>é€‰æ‹©æœ€ç¬¦åˆæ‚¨çœŸå®ä½“éªŒçš„æ ‡ç­¾~</p>
            </div>

            <div class="category">
                <div class="category-title">
                    <span>ğŸª</span> ç¯å¢ƒ
                </div>
                <div class="tags">
                    <div class="tag" data-text="ç¯å¢ƒèˆ’é€‚ï¼Œå¾ˆé€‚åˆèšä¼š">ç¯å¢ƒèˆ’é€‚</div>
                    <div class="tag" data-text="è£…ä¿®å¾ˆæœ‰ç‰¹è‰²ï¼Œæ‹ç…§å¾ˆå¥½çœ‹">è£…ä¿®ç‰¹è‰²</div>
                    <div class="tag" data-text="ç¯å¢ƒæ¥åœ°æ°”ï¼Œé€‚åˆæœ‹å‹å°èš">æ¥åœ°æ°”</div>
                    <div class="tag" data-text="ä½ç½®ä¾¿åˆ©ï¼Œäº¤é€šæ–¹ä¾¿">ä½ç½®ä¾¿åˆ©</div>
                    <div class="tag" data-text="åº—å†…å¾ˆå¹²å‡€æ•´æ´">å¹²å‡€æ•´æ´</div>
                    <div class="tag neutral" data-text="ç¯å¢ƒä¸€èˆ¬ï¼Œä¸ç®—å‡ºå½©">ç¯å¢ƒä¸€èˆ¬</div>
                    <div class="tag neutral" data-text="è£…ä¿®ç•¥æ˜¾è€æ—§">è£…ä¿®è€æ—§</div>
                    <div class="tag negative" data-text="ç¯å¢ƒå˜ˆæ‚ï¼Œæœ‰ç‚¹å½±å“ç”¨é¤">ç¯å¢ƒå˜ˆæ‚</div>
                </div>
            </div>

            <div class="category">
                <div class="category-title">
                    <span>ğŸ‘…</span> å£å‘³
                </div>
                <div class="tags">
                    <div class="tag" data-text="å‘³é“æ­£å®—ï¼Œåœ°é“çš„æ¹–å—å‘³å„¿">å‘³é“æ­£å®—</div>
                    <div class="tag" data-text="å£æ„Ÿä¸é”™ï¼Œå°è±¡æ·±åˆ»">å£æ„Ÿä¸é”™</div>
                    <div class="tag" data-text="åˆ†é‡å¾ˆè¶³ï¼Œæ€§ä»·æ¯”é«˜">åˆ†é‡å¾ˆè¶³</div>
                    <div class="tag" data-text="åˆ›æ–°èœå“ï¼Œå£å‘³ç‹¬ç‰¹">åˆ›æ–°ç‹¬ç‰¹</div>
                    <div class="tag neutral" data-text="å£å‘³ä¸­è§„ä¸­çŸ©">å£å‘³ä¸­è§„</div>
                    <div class="tag neutral" data-text="å¾ˆè¾£ï¼Œå¾ˆä¸‹é¥­">æœ‰ç‚¹è¾£äº†</div>
                    <div class="tag neutral" data-text="åˆ†é‡é€‚ä¸­ï¼Œä¸å¤šä¸å°‘">åˆ†é‡é€‚ä¸­</div>
                    <div class="tag negative" data-text="åˆ†é‡æœ‰ç‚¹å°‘ï¼Œä¸å¤ªå¤Ÿåƒ">åˆ†é‡åå°‘</div>
                </div>
            </div>

            <div class="category">
                <div class="category-title">
                    <span>ğŸ’</span> æœåŠ¡
                </div>
                <div class="tags">
                    <div class="tag" data-text="æœåŠ¡å‘˜å¾ˆçƒ­æƒ…å‘¨åˆ°">æœåŠ¡å‘¨åˆ°</div>
                    <div class="tag" data-text="ä¸Šèœé€Ÿåº¦å¾ˆå¿«">ä¸Šèœå¾ˆå¿«</div>
                    <div class="tag" data-text="æœåŠ¡æ€åº¦å¾ˆå¥½ï¼Œå¾ˆè€å¿ƒ">æ€åº¦å¾ˆå¥½</div>
                    <div class="tag" data-text="è€æ¿å¾ˆäº²åˆ‡ï¼Œåƒæœ‹å‹ä¸€æ ·">è€æ¿äº²åˆ‡</div>
                    <div class="tag" data-text="ä¼šä¸»åŠ¨æ¨èèœå“">ä¸»åŠ¨æ¨è</div>
                    <div class="tag neutral" data-text="æœåŠ¡è¿˜ç®—å¯ä»¥">æœåŠ¡ä¸€èˆ¬</div>
                    <div class="tag negative" data-text="æœåŠ¡æ€åº¦æœ‰ç‚¹å†·æ·¡ï¼Œå¯èƒ½æ˜¯å¤ªå¿™äº†">æ€åº¦å†·æ·¡</div>
                    <div class="tag negative" data-text="ä¸Šèœé€Ÿåº¦æœ‰ç‚¹æ…¢">ä¸Šèœç•¥æ…¢</div>
                </div>
            </div>

            <div class="category">
                <div class="category-title">
                    <span>ğŸ’°</span> ä»·æ ¼
                </div>
                <div class="tags">
                    <div class="tag" data-text="ä»·æ ¼å¾ˆå®æƒ ï¼Œå­¦ç”Ÿå…šå‹å¥½">ä»·æ ¼å®æƒ </div>
                    <div class="tag" data-text="æ€§ä»·æ¯”å¾ˆé«˜ï¼Œç‰©è¶…æ‰€å€¼">æ€§ä»·æ¯”é«˜</div>
                    <div class="tag" data-text="ä»·ä½é€‚ä¸­ï¼Œå¯ä»¥æ¥å—">ä»·ä½é€‚ä¸­</div>
                    <div class="tag" data-text="æœ‰ç‚¹å°è´µï¼Œä½†å¾ˆå€¼å¾—">æœ‰ç‚¹å°è´µ</div>
                    <div class="tag" data-text="ä»·æ ¼ä¾¿å®œï¼Œé‡å¤§å®æƒ ">ä»·æ ¼ä¾¿å®œ</div>
                    <div class="tag neutral" data-text="ä»·æ ¼ä¸­ç­‰æ°´å¹³">ä»·æ ¼ä¸­ç­‰</div>
                    <div class="tag negative" data-text="ä»·æ ¼åé«˜ï¼Œæ€§ä»·æ¯”ä¸å¤Ÿ">ä»·æ ¼åé«˜</div>
                    <div class="tag negative" data-text="åˆ«çš„éƒ½å¾ˆå¥½ï¼Œå°±æ˜¯æ€§ä»·æ¯”è¾ƒä½ï¼Œä¸å¤ªå€¼">æ€§ä»·æ¯”ä½</div>
                </div>
            </div>

            <div class="category">
                <div class="category-title">
                    <span>â­</span> ç»¼åˆ
                </div>
                <div class="tags">
                    <div class="tag" data-text="æ€»ä½“æ¥è¯´å¾ˆæ»¡æ„ï¼Œä¼šå†æ¥">æ€»ä½“æ»¡æ„</div>
                    <div class="tag" data-text="å€¼å¾—æ¨èç»™æœ‹å‹">å€¼å¾—æ¨è</div>
                    <div class="tag" data-text="æ˜¯é™„è¿‘æœ€å¥½çš„ä¸€å®¶">é™„è¿‘æœ€å¥½</div>
                    <div class="tag" data-text="ä¸‹æ¬¡è¿˜ä¼šå†æ¥">ä¸‹æ¬¡å†æ¥</div>
                    <div class="tag" data-text="è¶…å‡ºé¢„æœŸï¼Œå¾ˆæƒŠå–œ">è¶…å‡ºé¢„æœŸ</div>
                    <div class="tag neutral" data-text="ä½“éªŒè¿˜è¡Œï¼Œä¸ç®—ç‰¹åˆ«">ä½“éªŒè¿˜è¡Œ</div>
                    <div class="tag neutral" data-text="å¯ä»¥å°è¯•ï¼Œä½†ä¸æ˜¯é¦–é€‰">å¯ä»¥å°è¯•</div>
                    <div class="tag negative" data-text="æ•´ä½“è¿˜è¡Œï¼Œæœ‰å¾…æé«˜">æœ‰å¾…æé«˜</div>
                </div>
            </div>

            <div class="review-section">
                <div class="review-title">ğŸ“ è¯„ä»·é¢„è§ˆ</div>
                <div class="review-content" id="reviewContent"></div>
            </div>

            <div class="buttons">
                <button class="btn btn-secondary" onclick="clearReview()">æ¸…é™¤è¯„ä»·</button>
                <button class="btn btn-primary" onclick="submitReview()" id="submitBtn">
                    <span class="btn-text">æäº¤è¯„ä»·</span>
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </button>
            </div>
        </div>

        <div id="result-page" class="result-page">
            <div class="header">
                <h1>âœ¨åˆ†äº«ç»™å¥½å‹âœ¨</h1>
                <p>æ„Ÿè°¢æ‚¨çš„åé¦ˆ</p>
                <p>æˆ‘ä»¬ä¼šæ‚‰å¿ƒå€¾å¬ï¼Œä¸æ–­æå‡æ‚¨çš„ç”¨é¤ä½“éªŒ</p>
            </div>
            
            <div class="result-content">
                <div class="result-text" id="resultText"></div>
            </div>
            
            <div class="buttons">
                <button class="btn btn-secondary" onclick="goBack()">è¿”å›ç¼–è¾‘</button>
                <button class="btn btn-success" onclick="copyResult()">å¤åˆ¶åˆ†äº«</button>
            </div>
        </div>
    </div>

    <script>
        let selectedTags = [];

        // åˆå§‹åŒ–æ ‡ç­¾ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function() {
                const text = this.dataset.text;
                
                if (this.classList.contains('selected')) {
                    // å–æ¶ˆé€‰ä¸­
                    this.classList.remove('selected');
                    selectedTags = selectedTags.filter(t => t !== text);
                } else {
                    // é€‰ä¸­
                    this.classList.add('selected');
                    selectedTags.push(text);
                }
                
                updateReviewContent();
            });
        });

        function updateReviewContent() {
            const content = document.getElementById('reviewContent');
            if (selectedTags.length === 0) {
                content.textContent = '';
            } else {
                content.textContent = selectedTags.join('ï¼Œ') + 'ã€‚';
            }
        }

        function clearReview() {
            selectedTags = [];
            document.querySelectorAll('.tag.selected').forEach(tag => {
                tag.classList.remove('selected');
            });
            updateReviewContent();
        }

        async function submitReview() {
            if (selectedTags.length === 0) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªè¯„ä»·æ ‡ç­¾');
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            const btnText = submitBtn.querySelector('.btn-text');
            const loading = submitBtn.querySelector('.loading');
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            submitBtn.disabled = true;
            btnText.style.opacity = '0';
            loading.style.display = 'block';

            try {
                // æ¨¡æ‹Ÿ AI æ¶¦è‰²è¿‡ç¨‹
                const reviewText = selectedTags.join('ï¼Œ') + 'ã€‚';
                const polishedReview = await polishReview(reviewText);
                
                // æ˜¾ç¤ºç»“æœé¡µé¢
                document.getElementById('resultText').textContent = polishedReview;
                document.getElementById('main-page').style.display = 'none';
                document.getElementById('result-page').style.display = 'block';
                
            } catch (error) {
                alert('ç”Ÿæˆè¯„ä»·æ—¶å‡ºç°é”™è¯¯ï¼Œè¯·é‡è¯•');
                console.error('Error:', error);
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                submitBtn.disabled = false;
                btnText.style.opacity = '1';
                loading.style.display = 'none';
            }
        }

        async function polishReview(reviewText) {
            try {
                // è°ƒç”¨ Cloudflare Workers AI æ¥å£
                const response = await fetch('https://dianping-agent.linz.link/api/polish-review', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: reviewText,
                        prompt: `è¯·å°†ä»¥ä¸‹é¤å…è¯„ä»·æ ‡ç­¾éšæœºæ’åˆ—ï¼Œæ¶¦è‰²æˆä¸€æ®µè‡ªç„¶æµç•…çš„é¤å…ç‚¹è¯„ï¼Œè¦æ±‚ï¼š
1. è¯­è¨€è‡ªç„¶äº²åˆ‡ï¼Œä»¥é¡¾å®¢çš„è§†è§’åˆ†äº«ç”¨é¤ä½“éªŒï¼Œç‚¹è¯„è¿™å®¶é¤å…ã€‚é€‚åˆå‘å¸ƒåœ¨ç‚¹è¯„ç½‘ç«™ä¸Šã€‚
2. ä¿æŒåŸæœ‰ä¿¡æ¯çš„å‡†ç¡®æ€§ï¼ŒåŒ…æ‹¬æ­£é¢ã€ä¸­æ€§å’Œè´Ÿé¢è¯„ä»·ã€‚
3. å­—æ•°æ§åˆ¶åœ¨80-150å­—ä¹‹é—´ã€‚
4. è¯­è°ƒçœŸå®å®¢è§‚ï¼Œå¦‚å®åæ˜ ä½“éªŒã€‚
5. æ ¹æ®æ€»ä½“è¯„ä»·ï¼Œéšæœºç¼–å†™ä¸€å¥çœŸå®è‡ªç„¶çš„å¼€åœºç™½ï¼Œä¾‹å¦‚ä½†ä¸å±€é™äºï¼š"å¶ç„¶å‘ç°è¿™å®¶å®è—é¤å…","æ˜¨å¤©å’Œæœ‹å‹æ¥è¿™å®¶åº—åƒé¥­","ä¸å¯é”™è¿‡çš„åœ°é“æ¹–å—èœ","å·®ç‚¹é”™è¿‡è¿™ä¹ˆæ¥åœ°æ°”çš„é¦†å­","è€é¡¾å®¢äº†ï¼Œå®¶é—¨å£ç»ˆäºæœ‰åˆ†åº—äº†"ã€‚
6. æ ¹æ®æ€»ä½“è¯„ä»·ï¼Œéšæœºé€‰æ‹©æåŠæˆ–ç§°èµä»¥ä¸‹èœå“ï¼šé¦™ç…çŸ³æ–‘é±¼ã€ç‰›æ‚ç…²ã€å£å‘³è™¾ã€çŒªè„šç…¨å‡¤çˆªã€å°ç‚’é»„ç‰›è‚‰ã€æ“‚æ¤’èŒ„å­çš®è›‹ã€è— å¤´ç‚’é’ç¬‹ã€é’ç¬‹ç‚’è…Šè‚‰ã€ç“¦ç½æ±¤ã€‚
7. å¼€å¤´ç»“å°¾æ ¹æ®æ€»ä½“è¯„ä»·æ¥è¡¥å……ä¸€äº›ä¸»è§‚æ„Ÿå—å’Œå®¢è§‚å»ºè®®ï¼Œä½¿è¯„ä»·å†…å®¹æ˜¾å¾—çœŸå®å’Œå¤šæ ·åŒ–ã€‚
8. ä»¿ç…§å°çº¢ä¹¦æ™’å•é£æ ¼ï¼Œåœ¨åˆé€‚æ°å½“çš„ä½ç½®æ’å…¥ä¸€äº›è¡¨æƒ…ç¬¦å·ã€‚
9. ä½¿ç”¨ä¸­æ–‡ï¼Œä¸è¦å¤¹æ‚å…¶ä»–è¯­è¨€ã€‚

è¯„ä»·æ ‡ç­¾ï¼š${reviewText}

è¯·ç›´æ¥è¿”å›æ¶¦è‰²åçš„ç‚¹è¯„å†…å®¹ï¼Œä¸éœ€è¦å…¶ä»–è¯´æ˜ã€‚`
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                // æ£€æŸ¥å“åº”æ ¼å¼å¹¶æå–æ–‡æœ¬
                if (data.result && data.result.response) {
                    return data.result.response.trim();
                } else if (data.response) {
                    return data.response.trim();
                } else if (typeof data === 'string') {
                    return data.trim();
                } else {
                    throw new Error('Unexpected response format');
                }
                
            } catch (error) {
                console.error('AIæ¶¦è‰²å¤±è´¥:', error);
                
                // é™çº§åˆ°æœ¬åœ°æ¨¡æ¿ï¼Œæ ¹æ®è¯„ä»·ç±»å‹ç”Ÿæˆä¸åŒæ¨¡æ¿
                const hasNegative = selectedTags.some(tag => 
                    document.querySelector(`[data-text="${tag}"]`).classList.contains('negative')
                );
                const hasNeutral = selectedTags.some(tag => 
                    document.querySelector(`[data-text="${tag}"]`).classList.contains('neutral')
                );
                
                let templates = [];
                
                if (hasNegative) {
                    templates = [
                        `è¿™æ¬¡ç”¨é¤ä½“éªŒæœ‰äº›èµ·ä¼ã€‚${reviewText.replace('ã€‚', '')}ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æœ‰ä¸€äº›éœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚å¸Œæœ›åº—å®¶èƒ½å¤Ÿé‡è§†å®¢æˆ·åé¦ˆï¼Œæå‡æœåŠ¡è´¨é‡ã€‚`,
                        `å’Œæœ‹å‹æ¥è¿™å®¶åº—ç”¨é¤ï¼Œ${reviewText.replace('ã€‚', '')}ã€‚è™½ç„¶æœ‰äº›æ–¹é¢ä¸å¤Ÿç†æƒ³ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›äº®ç‚¹ã€‚å»ºè®®å¤§å®¶å¯ä»¥äº†è§£æ¸…æ¥šå†åšé€‰æ‹©ã€‚`,
                        `è¿™å®¶åº—çš„ä½“éªŒæ¯”è¾ƒå¤æ‚ï¼Œ${reviewText.replace('ã€‚', '')}ã€‚æœ‰å¥½çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰ä¸è¶³ä¹‹å¤„ã€‚å¦‚æœä½ ä¸ä»‹æ„è¿™äº›é—®é¢˜çš„è¯ï¼Œå¯ä»¥è¯•è¯•çœ‹ã€‚`
                    ];
                } else if (hasNeutral) {
                    templates = [
                        `è¿™å®¶é¤å…ç®—æ˜¯ä¸­è§„ä¸­çŸ©å§ï¼Œ${reviewText.replace('ã€‚', '')}ã€‚æ•´ä½“ä½“éªŒè¿˜ç®—å¯ä»¥ï¼Œæ²¡æœ‰ç‰¹åˆ«æƒŠè‰³ï¼Œä½†ä¹Ÿæ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚å¦‚æœåˆšå¥½è·¯è¿‡å¯ä»¥è¯•è¯•ã€‚`,
                        `æ˜¨å¤©æ¥è¿™é‡Œåƒé¥­ï¼Œ${reviewText.replace('ã€‚', '')}ã€‚è¯´ä¸ä¸Šç‰¹åˆ«å¥½ï¼Œä½†ä¹Ÿä¸ç®—å·®ã€‚å±äºé‚£ç§åƒè¿‡å°±å¿˜çš„ç±»å‹ï¼Œä½†å¶å°”æ¥ä¸€æ¬¡è¿˜æ˜¯å¯ä»¥çš„ã€‚`,
                        `å’Œæœ‹å‹ä¸€èµ·æ¥è¿™å®¶åº—ï¼Œ${reviewText.replace('ã€‚', '')}ã€‚æ•´ä½“æ„Ÿè§‰æ¯”è¾ƒå¹³åº¸ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«è®©äººå°è±¡æ·±åˆ»çš„åœ°æ–¹ã€‚ä»·ä½åˆé€‚çš„è¯å€’æ˜¯å¯ä»¥è€ƒè™‘ã€‚`
                    ];
                } else {
                    templates = [
                        `è¿™å®¶é¤å…çœŸçš„è®©æˆ‘å°è±¡æ·±åˆ»ï¼${reviewText.replace('ã€‚', '')}ï¼Œæ•´ä½“ç”¨é¤ä½“éªŒéå¸¸æ£’ã€‚è€æ¿å’ŒæœåŠ¡å‘˜éƒ½å¾ˆç”¨å¿ƒï¼Œèƒ½æ„Ÿå—åˆ°ä»–ä»¬å¯¹é£Ÿç‰©çš„çƒ­çˆ±ã€‚æ¨èå¤§å®¶æ¥è¯•è¯•ï¼Œç»å¯¹ä¸ä¼šå¤±æœ›ï¼`,
                        `æ˜¨å¤©å’Œæœ‹å‹æ¥è¿™å®¶åº—åƒé¥­ï¼Œ${reviewText.replace('ã€‚', '')}ï¼Œæˆ‘ä»¬éƒ½å¾ˆæ»¡æ„ã€‚ä»è¿›é—¨åˆ°ç¦»å¼€ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½å¾ˆæ„‰å¿«ã€‚ç‰¹åˆ«æ˜¯èœå“çš„å‘³é“ï¼ŒçœŸçš„å¾ˆæ£’ï¼ä¸‹æ¬¡æœ‰æœºä¼šä¸€å®šè¿˜ä¼šå†æ¥çš„ã€‚`,
                        `å¶ç„¶å‘ç°è¿™å®¶å®è—é¤å…ï¼Œ${reviewText.replace('ã€‚', '')}ï¼Œå®Œå…¨è¶…å‡ºäº†æˆ‘çš„æœŸå¾…ã€‚æ— è®ºæ˜¯ç¯å¢ƒã€æœåŠ¡è¿˜æ˜¯å£å‘³éƒ½å¾ˆä¸é”™ï¼Œæ€§ä»·æ¯”ä¹Ÿå¾ˆé«˜ã€‚å·²ç»å®‰åˆ©ç»™å‘¨å›´çš„æœ‹å‹äº†ï¼Œå¼ºçƒˆæ¨èï¼`
                    ];
                }
                
                return templates[Math.floor(Math.random() * templates.length)];
            }
        }

        function copyResult() {
            const resultText = document.getElementById('resultText').textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(resultText).then(() => {
                    const btn = event.target;
                    const originalText = btn.textContent;
                    btn.textContent = 'å·²å¤åˆ¶ï¼';
                    btn.style.background = 'linear-gradient(135deg, #38a169, #2f855a)';
                    
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
                    }, 2000);
                });
            } else {
                // å¤‡ç”¨æ–¹æ¡ˆ
                const textArea = document.createElement('textarea');
                textArea.value = resultText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'å·²å¤åˆ¶ï¼';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }
        }

        function goBack() {
            document.getElementById('main-page').style.display = 'block';
            document.getElementById('result-page').style.display = 'none';
        }

        // æ·»åŠ è§¦æ‘¸åé¦ˆ
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.95)';
            });
            
            tag.addEventListener('touchend', function() {
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
            });
        });
    </script>
</body>
</html>
